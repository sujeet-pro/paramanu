@layer pm.components {
  .pm-prose {
    --pm-prose-font-family: var(--pm-font-family-sans);
    --pm-prose-text-color: var(--pm-fg);
    --pm-prose-heading-color: var(--pm-fg);
    --pm-prose-link-color: var(--pm-fg-link);
    --pm-prose-link-hover-color: var(--pm-fg-link-hover);
    --pm-prose-border-color: var(--pm-border-muted);
    --pm-prose-code-bg: var(--pm-bg-muted);
    --pm-prose-quote-border: var(--pm-border);
    --pm-prose-quote-text: var(--pm-fg-muted);
    --pm-prose-th-bg: var(--pm-bg-subtle);
    --pm-prose-hr-color: var(--pm-neutral-hover);

    font-family: var(--pm-prose-font-family);
    line-height: var(--pm-font-lineHeight-relaxed);
    color: var(--pm-prose-text-color);
    max-width: 65ch;

    /* Sizes */
    &.pm-prose--sm {
      font-size: var(--pm-font-size-sm);

      & > * + * {
        margin-top: var(--pm-spacing-3);
      }

      & * + h1,
      & * + h2,
      & * + h3,
      & * + h4,
      & * + h5,
      & * + h6 {
        margin-top: var(--pm-spacing-6);
      }
    }

    &.pm-prose--md {
      font-size: var(--pm-font-size-md);

      & > * + * {
        margin-top: var(--pm-spacing-4);
      }

      & * + h1,
      & * + h2,
      & * + h3,
      & * + h4,
      & * + h5,
      & * + h6 {
        margin-top: var(--pm-spacing-8);
      }
    }

    &.pm-prose--lg {
      font-size: var(--pm-font-size-lg);

      & > * + * {
        margin-top: var(--pm-spacing-5);
      }

      & * + h1,
      & * + h2,
      & * + h3,
      & * + h4,
      & * + h5,
      & * + h6 {
        margin-top: var(--pm-spacing-10);
      }
    }

    /* Color */
    &.pm-prose--color-muted {
      --pm-prose-text-color: var(--pm-fg-muted);
    }

    /* Trim margins */
    &.pm-prose--trim {
      & > :first-child {
        margin-top: 0;
      }

      & > :last-child {
        margin-bottom: 0;
      }
    }

    /* Paragraphs */
    & p {
      margin: 0;
    }

    & p + p {
      margin-top: var(--pm-spacing-4);
    }

    /* Headings */
    & h1,
    & h2,
    & h3,
    & h4,
    & h5,
    & h6 {
      font-weight: var(--pm-font-weight-bold);
      line-height: var(--pm-font-lineHeight-tight);
      color: var(--pm-prose-heading-color);
      margin: 0;
    }

    & h1 {
      font-size: var(--pm-font-size-3xl);
      letter-spacing: -0.025em;
    }

    & h2 {
      font-size: var(--pm-font-size-2xl);
      letter-spacing: -0.02em;
    }

    & h3 {
      font-size: var(--pm-font-size-xl);
    }

    & h4 {
      font-size: var(--pm-font-size-lg);
    }

    & h5 {
      font-size: var(--pm-font-size-md);
    }

    & h6 {
      font-size: var(--pm-font-size-sm);
    }

    /* Links */
    & a {
      color: var(--pm-prose-link-color);
      text-decoration: underline;
      text-underline-offset: 2px;
      text-decoration-thickness: 1px;
    }

    & a:hover {
      color: var(--pm-prose-link-hover-color);
      text-decoration-thickness: 2px;
    }

    /* Lists */
    & ul,
    & ol {
      margin: 0;
      padding-left: var(--pm-spacing-6);
    }

    & ul {
      list-style-type: disc;
    }

    & ol {
      list-style-type: decimal;
    }

    & li + li {
      margin-top: var(--pm-spacing-2);
    }

    & li > ul,
    & li > ol {
      margin-top: var(--pm-spacing-2);
    }

    /* Blockquote */
    & blockquote {
      margin: 0;
      padding-left: var(--pm-spacing-4);
      border-left: 3px solid var(--pm-prose-quote-border);
      font-style: italic;
      color: var(--pm-prose-quote-text);
    }

    /* Inline code */
    & code {
      font-family: var(--pm-font-family-mono);
      font-size: 0.875em;
      background-color: var(--pm-prose-code-bg);
      padding: 0.125em 0.25em;
      border-radius: var(--pm-radius-sm);
    }

    /* Code blocks */
    & pre {
      margin: 0;
      overflow-x: auto;
      background-color: var(--pm-prose-code-bg);
      padding: var(--pm-spacing-4);
      border-radius: var(--pm-radius-md);
    }

    & pre code {
      background-color: transparent;
      padding: 0;
      border-radius: 0;
      font-size: var(--pm-font-size-sm);
    }

    /* Horizontal rule */
    & hr {
      border: none;
      border-top: 1px solid var(--pm-prose-hr-color);
      margin: var(--pm-spacing-8) 0;
    }

    /* Imgs */
    & img {
      max-width: 100%;
      height: auto;
      border-radius: var(--pm-radius-md);
    }

    /* Tables */
    & table {
      width: 100%;
      border-collapse: collapse;
    }

    & th,
    & td {
      padding: var(--pm-spacing-2) var(--pm-spacing-3);
      border: 1px solid var(--pm-prose-border-color);
      text-align: left;
    }

    & th {
      font-weight: var(--pm-font-weight-semibold);
      background-color: var(--pm-prose-th-bg);
    }

    /* Strong and emphasis */
    & strong {
      font-weight: var(--pm-font-weight-semibold);
      color: var(--pm-prose-heading-color);
    }

    /* Kbd inside prose */
    & kbd {
      font-family: var(--pm-font-family-mono);
      font-size: 0.875em;
      padding: 0.125em 0.375em;
      border: 1px solid var(--pm-prose-border-color);
      border-radius: var(--pm-radius-sm);
      box-shadow: 0 1px 0 0 var(--pm-prose-border-color);
    }

    /* Figures */
    & figure {
      margin: 0;
    }

    & figcaption {
      margin-top: var(--pm-spacing-2);
      font-size: 0.875em;
      color: var(--pm-prose-quote-text);
      text-align: center;
    }
  }

  /* Theme overrides: Ant Design */
  .pm-theme-antd .pm-prose {
    --pm-prose-font-family:
      -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --pm-prose-text-color: light-dark(rgba(0, 0, 0, 0.88), rgba(255, 255, 255, 0.85));
  }

  /* Theme overrides: Material */
  .pm-theme-material .pm-prose {
    --pm-prose-font-family: Roboto, "Helvetica Neue", Arial, sans-serif;
    letter-spacing: 0.00938em;
  }

  /* Theme overrides: Bootstrap */
  .pm-theme-bootstrap .pm-prose {
    --pm-prose-font-family:
      system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans",
      "Liberation Sans", Arial, sans-serif;
    line-height: 1.5;
  }

  /* Theme overrides: Dark Modern */
  .pm-theme-dark-modern .pm-prose {
    --pm-prose-text-color: var(--pm-color-neutral-300);
    --pm-prose-heading-color: var(--pm-color-neutral-50);
  }

  /* Theme overrides: Light Modern */
  .pm-theme-light-modern .pm-prose {
    --pm-prose-text-color: var(--pm-color-neutral-700);
    --pm-prose-heading-color: var(--pm-color-neutral-900);
  }
}
