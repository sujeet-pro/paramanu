import { defineConfig } from "astro/config"
import starlight from "@astrojs/starlight"
import react from "@astrojs/react"
import { createRequire } from "node:module"
import { rehypeBaseUrl } from "./src/plugins/rehype-base-url.mjs"

const require = createRequire(import.meta.url)
const { version } = require("../../package.json")

const base = "/paramanu"

export default defineConfig({
  site: "https://projects.sujeet.pro",
  base,
  markdown: {
    rehypePlugins: [
      [rehypeBaseUrl, { base }],
    ],
  },
  integrations: [
    starlight({
      components: {
        Hero: "./src/components/Hero.astro",
      },
      title: `Paramanu v${version}`,
      description: "A modern, accessible design system",
      social: {
        github: "https://github.com/sujeet-pro/paramanu",
      },
      customCss: ["./src/styles/paramanu-preview.css"],
      sidebar: [
        {
          label: "Getting Started",
          items: [
            { label: "Installation", slug: "getting-started/installation" },
            { label: "Usage: CDN", slug: "getting-started/usage-cdn" },
            { label: "Usage: Templated", slug: "getting-started/usage-templated" },
            { label: "Usage: React", slug: "getting-started/usage-react" },
          ],
        },
        {
          label: "Components",
          collapsed: false,
          items: [
            {
              label: "Primitives",
              collapsed: true,
              items: [
                { label: "Box", slug: "components/primitives/box" },
                { label: "Flex", slug: "components/primitives/flex" },
                { label: "Stack", slug: "components/primitives/stack" },
                { label: "Grid", slug: "components/primitives/grid" },
                { label: "Simple Grid", slug: "components/primitives/simple-grid" },
                { label: "Container", slug: "components/primitives/container" },
                { label: "Center", slug: "components/primitives/center" },
                { label: "Wrap", slug: "components/primitives/wrap" },
                { label: "Group", slug: "components/primitives/group" },
                { label: "Spacer", slug: "components/primitives/spacer" },
                { label: "Divider", slug: "components/primitives/divider" },
                { label: "Aspect Ratio", slug: "components/primitives/aspect-ratio" },
                { label: "Scroll Area", slug: "components/primitives/scroll-area" },
                { label: "Bleed", slug: "components/primitives/bleed" },
                { label: "Float", slug: "components/primitives/float" },
                { label: "Splitter", slug: "components/primitives/splitter" },
                { label: "App Shell", slug: "components/primitives/app-shell" },
                { label: "Masonry", slug: "components/primitives/masonry" },
              ],
            },
            {
              label: "Typography",
              collapsed: true,
              items: [
                { label: "Text", slug: "components/typography/text" },
                { label: "Heading", slug: "components/typography/heading" },
                { label: "Blockquote", slug: "components/typography/blockquote" },
                { label: "Prose", slug: "components/typography/prose" },
                { label: "Code", slug: "components/typography/code" },
                { label: "Kbd", slug: "components/typography/kbd" },
                { label: "Highlight", slug: "components/typography/highlight" },
                { label: "Mark", slug: "components/typography/mark" },
                { label: "Truncate", slug: "components/typography/truncate" },
                { label: "List", slug: "components/typography/list" },
              ],
            },
            {
              label: "Btns",
              collapsed: true,
              items: [
                { label: "Btn", slug: "components/buttons/button" },
                { label: "Btn Group", slug: "components/buttons/button-group" },
                { label: "Icon Btn", slug: "components/buttons/icon-button" },
                { label: "Close Btn", slug: "components/buttons/close-button" },
                { label: "Toggle Btn", slug: "components/buttons/toggle-button" },
                { label: "Toggle Group", slug: "components/buttons/toggle-group" },
                { label: "FAB", slug: "components/buttons/fab" },
              ],
            },
            {
              label: "Forms",
              collapsed: true,
              items: [
                { label: "Input", slug: "components/forms/input" },
                { label: "Textarea", slug: "components/forms/textarea" },
                { label: "Password Input", slug: "components/forms/password-input" },
                { label: "Number Input", slug: "components/forms/number-input" },
                { label: "Pin Input", slug: "components/forms/pin-input" },
                { label: "Search Input", slug: "components/forms/search-input" },
                { label: "Tags Input", slug: "components/forms/tags-input" },
                { label: "Editable Text", slug: "components/forms/editable-text" },
                { label: "Mentions", slug: "components/forms/mentions" },
                { label: "Checkbox", slug: "components/forms/checkbox" },
                { label: "Checkbox Card", slug: "components/forms/checkbox-card" },
                { label: "Radio", slug: "components/forms/radio" },
                { label: "Radio Card", slug: "components/forms/radio-card" },
                { label: "Switch", slug: "components/forms/switch" },
                { label: "Segmented Control", slug: "components/forms/segmented-control" },
                { label: "Select", slug: "components/forms/select" },
                { label: "Native Select", slug: "components/forms/native-select" },
                { label: "Multi Select", slug: "components/forms/multi-select" },
                { label: "Combobox", slug: "components/forms/combobox" },
                { label: "Date Picker", slug: "components/forms/date-picker" },
                { label: "Date Range Picker", slug: "components/forms/date-range-picker" },
                { label: "Time Picker", slug: "components/forms/time-picker" },
                { label: "Calendar", slug: "components/forms/calendar" },
                { label: "Color Picker", slug: "components/forms/color-picker" },
                { label: "Cascader", slug: "components/forms/cascader" },
                { label: "Slider", slug: "components/forms/slider" },
                { label: "Rating", slug: "components/forms/rating" },
                { label: "File Upload", slug: "components/forms/file-upload" },
                { label: "Dropzone", slug: "components/forms/dropzone" },
                { label: "Form", slug: "components/forms/form" },
                { label: "Form Control", slug: "components/forms/form-control" },
                { label: "Label", slug: "components/forms/label" },
                { label: "Fieldset", slug: "components/forms/fieldset" },
                { label: "Transfer", slug: "components/forms/transfer" },
              ],
            },
            {
              label: "Navigation",
              collapsed: true,
              items: [
                { label: "Navbar", slug: "components/navigation/navbar" },
                { label: "Sidebar", slug: "components/navigation/sidebar" },
                { label: "Menu", slug: "components/navigation/menu" },
                { label: "Menubar", slug: "components/navigation/menubar" },
                { label: "Dropdown Menu", slug: "components/navigation/dropdown-menu" },
                { label: "Context Menu", slug: "components/navigation/context-menu" },
                { label: "Breadcrumb", slug: "components/navigation/breadcrumbs" },
                { label: "Tabs", slug: "components/navigation/tabs" },
                { label: "Pagination", slug: "components/navigation/pagination" },
                { label: "Steps", slug: "components/navigation/steps" },
                { label: "Link", slug: "components/navigation/link" },
                { label: "Tree View", slug: "components/navigation/tree-view" },
                { label: "Skip Nav Link", slug: "components/navigation/skip-nav-link" },
                { label: "Back to Top", slug: "components/navigation/back-to-top" },
              ],
            },
            {
              label: "Data Display",
              collapsed: true,
              items: [
                { label: "Card", slug: "components/data-display/card" },
                { label: "Tile", slug: "components/data-display/tile" },
                { label: "Table", slug: "components/data-display/table" },
                { label: "Data Table", slug: "components/data-display/data-table" },
                { label: "Data Grid", slug: "components/data-display/data-grid" },
                { label: "Data List", slug: "components/data-display/data-list" },
                { label: "Structured List", slug: "components/data-display/structured-list" },
                { label: "Timeline", slug: "components/data-display/timeline" },
                { label: "Avatar", slug: "components/data-display/avatar" },
                { label: "Avatar Group", slug: "components/data-display/avatar-group" },
                { label: "Img", slug: "components/data-display/image" },
                { label: "Icon", slug: "components/data-display/icon" },
                { label: "QR Code", slug: "components/data-display/qr-code" },
                { label: "Embed", slug: "components/data-display/embed" },
                { label: "Badge", slug: "components/data-display/badge" },
                { label: "Tag", slug: "components/data-display/tag" },
                { label: "Stat", slug: "components/data-display/stat" },
                { label: "Empty State", slug: "components/data-display/empty-state" },
                { label: "Clipboard", slug: "components/data-display/clipboard" },
              ],
            },
            {
              label: "Feedback",
              collapsed: true,
              items: [
                { label: "Alert", slug: "components/feedback/alert" },
                { label: "Toast", slug: "components/feedback/toast" },
                { label: "Notif", slug: "components/feedback/notification" },
                { label: "Banner", slug: "components/feedback/banner" },
                { label: "Inline Message", slug: "components/feedback/inline-message" },
                { label: "Progress Bar", slug: "components/feedback/progress-bar" },
                { label: "Circular Progress", slug: "components/feedback/circular-progress" },
                { label: "Spinner", slug: "components/feedback/spinner" },
                { label: "Skeleton", slug: "components/feedback/skeleton" },
                { label: "Loading Overlay", slug: "components/feedback/loading-overlay" },
                { label: "NProgress", slug: "components/feedback/nprogress" },
              ],
            },
            {
              label: "Overlays",
              collapsed: true,
              items: [
                { label: "Dialog", slug: "components/overlays/dialog" },
                { label: "Alert Dialog", slug: "components/overlays/alert-dialog" },
                { label: "Drawer", slug: "components/overlays/drawer" },
                { label: "Sheet", slug: "components/overlays/sheet" },
                { label: "Popover", slug: "components/overlays/popover" },
                { label: "Tooltip", slug: "components/overlays/tooltip" },
                { label: "Hover Card", slug: "components/overlays/hover-card" },
                { label: "Inline Dialog", slug: "components/overlays/inline-dialog" },
                { label: "Backdrop", slug: "components/overlays/backdrop" },
                { label: "Command Palette", slug: "components/overlays/command-palette" },
              ],
            },
            {
              label: "Disclosure",
              collapsed: true,
              items: [
                { label: "Accordion", slug: "components/disclosure/accordion" },
                { label: "Collapsible", slug: "components/disclosure/collapsible" },
                { label: "Carousel", slug: "components/disclosure/carousel" },
                { label: "Tour", slug: "components/disclosure/tour" },
              ],
            },
            {
              label: "Utilities",
              collapsed: true,
              items: [
                { label: "Visually Hidden", slug: "components/utilities/visually-hidden" },
                { label: "Focus Trap", slug: "components/utilities/focus-trap" },
                { label: "Skip Nav", slug: "components/utilities/skip-nav" },
                { label: "Portal", slug: "components/utilities/portal" },
                { label: "Presence", slug: "components/utilities/presence" },
                { label: "Show/Hide", slug: "components/utilities/show-hide" },
                { label: "Client Only", slug: "components/utilities/client-only" },
                { label: "Theme Provider", slug: "components/utilities/theme-provider" },
                { label: "Direction Provider", slug: "components/utilities/direction-provider" },
                { label: "Locale Provider", slug: "components/utilities/locale-provider" },
                { label: "Format Number", slug: "components/utilities/format-number" },
                { label: "Format Byte", slug: "components/utilities/format-byte" },
                { label: "Affix", slug: "components/utilities/affix" },
              ],
            },
          ],
        },
        {
          label: "Tokens",
          items: [
            { label: "Colors", slug: "tokens/colors" },
            { label: "Spacing", slug: "tokens/spacing" },
            { label: "Typography", slug: "tokens/typography" },
          ],
        },
        {
          label: "Storybooks",
          items: [
            {
              label: "React Storybook",
              link: "/storybook/react/",
              attrs: { target: "_blank" },
            },
            {
              label: "Vanilla Storybook",
              link: "/storybook/vanilla/",
              attrs: { target: "_blank" },
            },
          ],
        },
      ],
    }),
    react(),
  ],
})
